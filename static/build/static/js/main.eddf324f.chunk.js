(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),i=(n(2),n(1));const r=Object(o.h)('<div class="systen_msg"><hr><h3></h3><button class="std_btn">Ok</button><hr></div>',8),c=Object(o.h)('<div class="covering-panel"></div>',2),[s,l]=Object(i.i)(),[a,d]=Object(i.i)();function u(){l();const e=a();e&&e(),d()}function b(){return[(()=>{const e=r.cloneNode(!0),t=e.firstChild.nextSibling,n=t.nextSibling;return Object(o.c)(t,s),n.$$click=u,e})(),c.cloneNode(!0)]}Object(o.b)(["click"]);const[h,v]=Object(i.i)(void 0),[f,g]=Object(i.i)(j());function p(e,t){localStorage.setItem("userName",e),g(e),t&&(v(t),localStorage.setItem("userType",t))}function m(e,t){switch(e){case"NameTooShort":l("Name should be at least 4 characters long!");break;case"PlayerExists":l("Username already taken!");break;case"UserNotFound":l("Unable to verify user, please try again!");break;case"UnsupportedSymbolInPass":l("Password can contain capital and small letters, digits and [-_.,]!");break;case"PassTooShort":l("Password too short!");break;case"UnsupportedSymbol":l("Name contains unsupported symbols!");break;case"EmailTaken":l("User with that email already exists!");break;case"EmailNotValid":l("This is not a valid e-mail!");break;default:t(e.Ok)}}function j(){return localStorage.getItem("userName")||O(),localStorage.getItem("userName")}function O(e){fetch("/auth/get_username").then(e=>e.json()).then(t=>{t.Guest?p(t.Guest,"guest"):t.User&&(p(t.User[0],"user"),void 0!==e&&e(t.User[1]))}).catch(console.log)}function y(){fetch("/auth/logout").catch(console.log),g(null),localStorage.clear(),location.reload()}const _=Object(o.h)('<div class="systen_msg"><p style="color:gray;">Username: <i style="color:red;"></i></p><hr><p><input type="email"></p><p><button class="std_btn">Update Email</button></p><hr><p><input type="password" placeholder="Password"></p><p><input type="password" placeholder="Repeat password"></p><p><button class="std_btn">Update Password</button></p><hr><p style="font-size:small;color:gray;"><i>Press Esc to exit.</i></p></div>',30),w=Object(o.h)('<div class="covering-panel"></div>',2),[k,S]=Object(i.i)(!1),[x,$]=Object(i.i)(!1),[N,C]=Object(i.i)(),I=()=>{$(!1)};function E(e,t){$(!0);var n,o;e.value==t.value?(n=e.value,o=I,n.length>72?l("Password too long!"):fetch("/auth/update_pass",{method:"put",body:JSON.stringify({user:j(),password:n,email:""})}).then(e=>e.json()).then(e=>m(e,e=>l("Password is changed!"))).catch(console.log).finally(()=>{o&&o()})):(l("Passwords are not indentical!"),I()),[e,t].forEach(e=>e.value="")}function L(e){$(!0),function(e,t,n){fetch("/auth/update_email",{method:"put",body:JSON.stringify({user:j(),password:"",email:e})}).then(e=>e.json()).then(n=>m(n,n=>{t(e)})).catch(console.log).finally(()=>{n&&n()})}(e,C,I)}function P(){if("user"!=localStorage.getItem("userType"))return void l("User profile does not exist!\nPlease login and try again!");function e(e){"Escape"===e.key&&S(!1)}let t,n,r;return Object(i.m)(()=>{document.addEventListener("keydown",e)}),Object(i.l)(()=>{document.removeEventListener("keydown",e)}),O(C),[(()=>{const e=_.cloneNode(!0),c=e.firstChild,l=c.firstChild.nextSibling,a=c.nextSibling.nextSibling,d=a.firstChild,u=a.nextSibling,b=u.firstChild,h=u.nextSibling.nextSibling,v=h.firstChild,f=h.nextSibling,g=f.firstChild,p=f.nextSibling.firstChild;Object(o.c)(l,j);"function"===typeof r?r(d):r=d,b.$$click=()=>L(r.value);"function"===typeof t?t(v):t=v;return"function"===typeof n?n(g):n=g,p.$$click=()=>{E(t,n)},Object(i.g)(t=>{const n=s()?"z-index: 0 !important;":"",i=N(),r=x(),c=x();return t._v$=Object(o.g)(e,n,t._v$),i!==t._v$2&&Object(o.f)(d,"placeholder",t._v$2=i),r!==t._v$3&&(b.disabled=t._v$3=r),c!==t._v$4&&(p.disabled=t._v$4=c),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e})(),w.cloneNode(!0)]}Object(o.b)(["click"]);const U=Object(o.h)("<button></button>",2),A=Object(o.h)('<nav><div class="nav_block"><div class="box"></div><div class="box"></div></div><div class="image_nav"></div><div class="nav_block"><div class="box"></div><div class="box"></div></div></nav>',16);function J(e){return(()=>{const t=U.cloneNode(!0);return t.$$click=()=>e.click(),Object(o.c)(t,()=>e.text),Object(i.g)(n=>{const i=e.style,r=e.class?e.class:"std_btn",c=e.disabled;return n._v$=Object(o.g)(t,i,n._v$),r!==n._v$2&&Object(o.a)(t,n._v$2=r),c!==n._v$3&&(t.disabled=n._v$3=c),n},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}function Q(e){const t=j();return(()=>{const n=A.cloneNode(!0),r=n.firstChild,c=r.firstChild,s=c.nextSibling,l=r.nextSibling.nextSibling.firstChild,a=l.nextSibling;return Object(o.c)(c,t?Object(i.d)(J,{text:t,click:()=>S(!0)}):[]),Object(o.c)(s,(()=>{const t=Object(o.d)(()=>!e.left,!0);return()=>t()?[]:Object(i.d)(J,Object(i.k)(()=>e.left))})()),Object(o.c)(l,t?Object(i.d)(J,{text:"Logout",click:y}):[]),Object(o.c)(a,(()=>{const t=Object(o.d)(()=>!e.right,!0);return()=>t()?[]:Object(i.d)(J,Object(i.k)(()=>e.right))})()),n})()}Object(o.b)(["click"]);const z=Object(o.h)('<footer>Powered by Rust <a href="https://rocket.rs/" target="_blank">\u{1f680}</a>. Frontend <a href="https://www.solidjs.com/" target="_blank">Solid-JS</a>. Developed by Daniel Nikolaev <a href="https://github.com/Dah-phd/Dah-phd" target="_blank">GitHub</a>.<i class="fa fa-github"></i></footer>',10);function W(){return z.cloneNode(!0)}const T=Object(o.h)('<div class="rocket-container"><div class="structure"><svg height="352" id="rocket-svg" version="1.1" viewbox="0 0 59.266662 93.133333" width="224" xmlns="http://www.w3.org/2000/svg"><g id="layer2" transform="translate(-33.866666,-33.866666)"><path d="m 296,336 a 8.0000078,8.0000078 0 0 0 -8,8 v 80 a 8.0000078,7.9999501 0 0 0 1.16406,4.14062 l -0.22461,0.11329 49.32227,49.32031 0.0781,0.0801 0.004,-0.004 A 7.9999934,8.0000655 0 0 0 344,480 a 7.9999934,8.0000655 0 0 0 8,-8 v -80 a 7.9999934,7.9998924 0 0 0 -2.34961,-5.65625 l 0.004,-0.004 -48.00391,-48.00195 -0.004,0.002 A 8.0000078,8.0000078 0 0 0 296,336 Z" id="right-wing" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="m 184,336 a 8.0000006,8.0000078 0 0 0 -5.65234,2.3457 l -0.004,-0.002 -47.91797,47.91797 -0.082,0.082 0.004,0.002 A 8.0000078,7.9998924 0 0 0 128,392 v 80 a 8.0000078,8.0000655 0 0 0 8,8 8.0000078,8.0000655 0 0 0 5.65625,-2.34961 l 0.004,0.004 49.40039,-49.40039 -0.22657,-0.11329 A 8.0000006,7.9999501 0 0 0 192,424 v -80 a 8.0000006,8.0000078 0 0 0 -8,-8 z" id="left-wing" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="M 239.96875,128 A 111.99996,124.13082 0 0 0 176,240 l 16,200 a 8.0000006,8.0000655 0 0 0 8,8 h 80 a 8.0000078,8.0000655 0 0 0 8,-8 L 304,240 A 111.99996,124.13082 0 0 0 239.96875,128 Z" id="rocket-main-part" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="m 239.96875,128 a 111.99996,124.13082 0 0 0 -47.77344,48 h 95.51953 a 111.99996,124.13082 0 0 0 -47.74609,-48 z" id="nose" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><ellipse cx="63.5" cy="59.266663" id="window-stroke" rx="7.4083333" ry="7.4083328" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></ellipse><ellipse cx="63.499996" cy="59.266666" id="window-inner" rx="6.3499975" ry="6.3500061" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></ellipse><path d="m 240,336 a 7.9999898,8.0000078 0 0 0 -8,8 v 128 a 7.9999898,8.0000078 0 0 0 8,8 7.9999898,8.0000078 0 0 0 8,-8 V 344 a 7.9999898,8.0000078 0 0 0 -8,-8 z" id="middle-wing" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="M 239.96875,128 A 111.99996,124.13082 0 0 0 176,240 l 7.68164,96.01562 a 8.0000006,8.0000078 0 0 0 -5.33398,2.33008 l -0.004,-0.002 -47.91797,47.91797 -0.082,0.082 0.004,0.002 A 8.0000078,7.9998924 0 0 0 128,392 v 80 a 8.0000078,8.0000655 0 0 0 8,8 8.0000078,8.0000655 0 0 0 5.65625,-2.34961 l 0.004,0.004 49.40039,-49.40039 -0.22657,-0.11329 a 8.0000006,7.9999501 0 0 0 0.18946,-0.3496 l 0.0371,0.46289 L 192,440 a 8.0000006,8.0000655 0 0 0 8,8 h 32 v 24 a 7.9999898,8.0000078 0 0 0 8,8 V 336 252 196 128.01758 A 111.99996,124.13082 0 0 0 239.96875,128 Z" id="shadow-layer" style="opacity:0.2;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path></g></svg></div><div class="text-container"><h2>Loading</h2></div><div class="smoke"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div></div>',50),[B,G]=Object(i.i)(!1),[M,R]=Object(i.i)(!1);function V(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];R(e),G(!0),setTimeout(()=>{G(!1)},300)}function D(){R(!1)}function H(){return T.cloneNode(!0)}const F=Object(o.h)('<div style="flex-basis: 50%;"><h1>Sign In:</h1><div><p><input type="text" placeholder="Username"></p><p><input type="password" placeholder="Password"></p><p><button class="std_btn">Login</button></p></div></div>',16),Z=Object(o.h)('<div style="flex-basis: 50%;"><h1>Sign In as Guest</h1><div><p><input type="text" placeholder="Username"></p><p><button class="std_btn">Register as Guest:</button></p></div></div>',13),q=Object(o.h)('<div style="flex-basis: 50%;"><h1>Create New Account:</h1><div><p><input type="text" placeholder="Username"></p><p><input type="password" placeholder="Password"></p><p><input type="password" placeholder="Repeat password"></p><p><input type="email" placeholder="Email"></p><p><button class="std_btn">Register User</button></p></div></div>',22);function K(){let e,t;function n(){V(!0),function(e,t,n){fetch("/auth/login",{method:"post",body:JSON.stringify({User:[e,t]})}).then(e=>e.json()).then(e=>{m(e,e=>p(e,"user"))}).catch(console.log).finally(()=>{n&&n()})}(e.value,t.value,D),t.value=null}return(()=>{const o=F.cloneNode(!0),i=o.firstChild.nextSibling.firstChild,r=i.firstChild,c=i.nextSibling,s=c.firstChild,l=c.nextSibling.firstChild;o.addEventListener("keypress",e=>{"Enter"==e.key&&n()});"function"===typeof e?e(r):e=r;return"function"===typeof t?t(s):t=s,l.$$click=n,o})()}function X(){let e;function t(){V(!0),function(e,t){fetch("/auth/login",{method:"post",body:JSON.stringify({Guest:e})}).then(e=>e.json()).then(e=>{m(e,e=>p(e,"guest"))}).catch(console.log).finally(()=>{t&&t()})}(e.value,D),e.value=null}return(()=>{const n=Z.cloneNode(!0),o=n.firstChild.nextSibling.firstChild,i=o.firstChild,r=o.nextSibling.firstChild;n.addEventListener("keypress",e=>{"Enter"==e.key&&t()});return"function"===typeof e?e(i):e=i,r.$$click=t,n})()}function Y(){let e,t,n,o;function i(){if(t.value!=n.value)return alert("Passwords do not match!");V(!0),function(e,t,n,o){t.length>72?l("Password too long!"):fetch("/auth/register",{method:"post",body:JSON.stringify({user:e,password:t,email:n})}).then(e=>e.json()).then(e=>{m(e,e=>p(e,"user"))}).catch(console.log).finally(()=>{o&&o()})}(e.value,t.value,o.value,D),[e,t,n,o].forEach(e=>e.value=null)}return(()=>{const r=q.cloneNode(!0),c=r.firstChild.nextSibling.firstChild,s=c.firstChild,l=c.nextSibling,a=l.firstChild,d=l.nextSibling,u=d.firstChild,b=d.nextSibling,h=b.firstChild,v=b.nextSibling.firstChild;r.addEventListener("keypress",e=>{"Enter"==e.key&&i()});"function"===typeof e?e(s):e=s;"function"===typeof t?t(a):t=a;"function"===typeof n?n(u):n=u;return"function"===typeof o?o(h):o=h,v.$$click=i,r})()}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(o.b)(["click"]);class te{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ee(this,"status",void 0),ee(this,"uri",void 0),ee(this,"event_src",void 0),ee(this,"callback",void 0),ee(this,"retry",void 0),this.uri=e,this.event_src=new EventSource(e),this.callback=t,this.retry=n,this.status=!1,this.connect()}kill(){this.event_src.close()}connect(){this.event_src.addEventListener("message",e=>{console.log(e),this.callback(JSON.parse(e.data),this)}),this.event_src.addEventListener("open",()=>{console.log(this.uri),this.status=!0,console.log("connected to event stream at "+this.uri)}),this.event_src.addEventListener("error",()=>{this.status=!1,this.event_src.close();let e=this.retry;this.retry=Math.min(64,2*this.retry),console.log("connection lost. attempting to reconnect in ".concat(e,"s")),setTimeout(()=>{this.event_src=new EventSource(this.uri),this.connect()},1e3*e)})}}const ne=Object(o.h)('<div class="chat_wrapper"><div class="chat_box"></div></div>',4),oe=Object(o.h)('<div class="msg_own_wrapper"><div class="msg_own"></div></div>',4),ie=Object(o.h)('<div class="msg"></div>',2),re=Object(o.h)('<div class="msg_user"><span class="msg_user"> <span style="font-size:small;">From: </span></span></div>',6),ce=Object(o.h)('<div class="send_msg"><input type="text" class="send_msg_box"><div class="send_msg_btn"></div></div>',5),[se,le]=Object(i.i)(0),[ae,de]=Object(i.i)(null),[ue,be]=Object(i.i)(!1);function he(e){const t=localStorage.getItem(we);if(!t)return;const n="chat_".concat(JSON.stringify(t)),o=function(e){const t=sessionStorage.getItem(e);return t?JSON.parse(t):[]}(n);return e&&o.push(e),sessionStorage.setItem(n,JSON.stringify(o)),o}const[ve,fe]=Object(i.i)();function ge(){let e;return Object(i.e)(()=>{!function(e){if(!e)return;e.scrollTop=e.scrollHeight}(e),ae()}),(()=>{const t=ne.cloneNode(!0),n=t.firstChild;return"function"===typeof e?e(n):e=n,Object(o.c)(n,Object(i.d)(i.a,{get each(){return he(ae())},children:e=>{const t=Object(i.d)(pe,{get msg_sender(){return e.player},get msg(){return e.msg}});return fe(e.player),t}})),Object(o.c)(t,Object(i.d)(me,{}),null),Object(i.g)(e=>Object(o.g)(t,ue()?"":"display:none;",e)),t})()}function pe(e){return f()==e.msg_sender?(()=>{const t=oe.cloneNode(!0),n=t.firstChild;return Object(o.c)(n,()=>e.msg),t})():ve()==e.msg_sender?(()=>{const t=ie.cloneNode(!0);return Object(o.c)(t,()=>e.msg),t})():[(()=>{const t=re.cloneNode(!0),n=t.firstChild;n.firstChild.nextSibling;return Object(o.c)(n,()=>e.msg_sender,null),t})(),(()=>{const t=ie.cloneNode(!0);return Object(o.c)(t,()=>e.msg),t})()]}function me(){let e;const t=()=>{var t;e.value&&(t=e.value,fetch("/chat/sender",{method:"post",body:JSON.stringify({id:{MatchID:localStorage.getItem("activeChat")},msg:t,player:f()})})),e.value=null};return(()=>{const n=ce.cloneNode(!0),o=n.firstChild,i=o.nextSibling;n.addEventListener("keypress",e=>{"Enter"==e.key&&t()});return"function"===typeof e?e(o):e=o,i.$$click=t,n})()}Object(o.b)(["click"]);function je(){const e=localStorage.getItem(we);e&&(localStorage.setItem("activeChat",e),new te("/game_chat/<owner>".replace("<owner>",e),_e))}const[Oe,ye]=Object(i.i)(null);function _e(e,t){de(e),ue()||le(se()+1),ye(t)}const we="active_game";function ke(e,t){localStorage.setItem(we,e),je(),$e(t),new te("/game_events/<owner>".replace("<owner>",e),(e,n)=>{xe(e,n,t)})}function Se(){const e=sessionStorage.getItem("stateBackupTimeout");null!=e&&window.clearInterval(Number(e))}function xe(e,t,n){n(e),function(e,t){if(e&&e.ActiveQuoridor&&e.ActiveQuoridor.winner)return mt(e),function(e,t){var n;l("Winner is ".concat(null===e||void 0===e||null===(n=e.ActiveQuoridor)||void 0===n?void 0:n.winner,"!")),localStorage.removeItem(we),d(()=>{t(null),console.log("nulled")});const o=Oe();null===o||void 0===o||o.kill(),sessionStorage.removeItem("activeChat")}(e,t),!0;return!1}(e,n)&&(null===t||void 0===t||t.kill())}function $e(e){const t=localStorage.getItem(we);t&&j()&&fetch("/game_state/<owner>".replace("<owner>",t)).then(e=>e.json()).then(t=>xe(t,void 0,e)).catch(e=>{console.log(e),localStorage.removeItem(we)}).finally()}function Ne(e,t,n){const o=[];for(let i in n.horizontal_walls){let r=n.horizontal_walls[i];r[1]!=t&&r[1]!=t-1||(r[0]==e&&o.push(" bottom_red"),r[0]==e-1&&o.push(" top_red"))}for(let i in n.vertical_walls){let r=n.vertical_walls[i];r[0]!=e&&r[0]!=e-1||(r[1]==t&&o.push(" right_red"),r[1]==t-1&&o.push(" left_red"))}return o.join(" ")}function Ce(e,t,n){let o=" ";return n.up_player[0]==e&&n.up_player[1]==t&&(o+="\u{1f980}"),n.down_player[0]==e&&n.down_player[1]==t&&(o+="\u{1f40d}"),o}function Ie(e){fetch("/active_lobbies").then(e=>e.json()).then(t=>{t&&e(t)}).catch(console.log)}function Ee(e,t){new te("/lobby_events/<owner>".replace("<owner>",e),(e,n)=>{e&&e.game_started&&(localStorage.removeItem("activeLobby"),ht(!1),n.kill(),ke(e.game_started,t))})}const Le=Object(o.h)('<div class="lobby_struct"> | </div>',2),Pe=Object(o.h)('<div class="lobbies"></div>',2);function Ue(){const e=sessionStorage.getItem("lobbyInterval");window.clearInterval(Number(e))}function Ae(e){return(()=>{const t=Le.cloneNode(!0),n=t.firstChild;return t.$$click=()=>{var t,n,o;t=e.lobby.owner,n=e.gameSetter,o=D,fetch("/join/<owner>".replace("<owner>",t)).then(e=>e.json()).then(e=>{e&&(console.log(e),ke(e,n))}).catch(console.log).finally(()=>{o&&o()}),V(!0)},Object(o.c)(t,()=>e.lobby.match_type,n),Object(o.c)(t,()=>e.lobby.owner,null),t})()}function Je(e){const[t,n]=Object(i.i)([]);var r;return r=n,sessionStorage.setItem("lobbyInterval",window.setInterval(()=>{Ie(r)},1e4).toString()),Object(i.l)(Ue),Ie(n),(()=>{const n=Pe.cloneNode(!0);return Object(o.c)(n,Object(i.d)(i.a,{get each(){return t()},children:t=>Object(i.d)(Ae,{lobby:t,get gameSetter(){return e.gameSetter}})})),n})()}Object(o.b)(["click"]);const Qe=Object(o.h)("<div></div>",2),ze=Object(o.h)('<div class="row"></div>',2),We=Object(o.h)('<div class="full_screen_centered"><div class="quoridor"><h1> (<!>)</h1><div></div><h1> (<!>)</h1><div class="box"><button class="std_btn">PlayerMove</button><button class="std_btn">Horizontal Border</button><button class="std_btn">Vertical Border</button></div></div></div>',20),Te=[0,1,2,3,4,5,6,7,8],Be={move:function(e,t,n){return console.log(e,t,"m"),{QuoridorMove:[[e,t],n]}},hW:function(e,t,n){return console.log(e,t,"h"),{QuoridorWallH:[[e,t],n]}},vW:function(e,t,n){return console.log(e,t,"v"),{QuoridorWallV:[[e,t],n]}}},[Ge,Me]=Object(i.i)("move"),Re=new RegExp("wall_bot|wall_top|wall_left|wall_right");function Ve(e,t,n){const o=document.getElementById("".concat(e).concat(t));o&&(o.className="".concat(o.className," ").concat(n))}function De(e){return(()=>{const t=Qe.cloneNode(!0);return t.addEventListener("mouseleave",()=>{"move"!==Ge()&&function(e,t){if("move"===Ge())return;const n=[[e,t],[e,t+1],[e+1,t],[e+1,t+1]];for(const o in n){const e=document.getElementById("".concat(n[o][0]).concat(n[o][1]));e&&(e.className=e.className.replace(Re,""))}}(e.row,e.column)}),t.addEventListener("mouseenter",()=>{"move"!==Ge()&&function(e,t,n){const o=Ge();"hW"===o&&function(e,t,n){if(8==e||8==t)return!1;for(const o in n.vertical_walls){const i=n.vertical_walls[o];if(i[0]==e&&i[1]==t)return!1}for(const o in n.horizontal_walls){const i=n.horizontal_walls[o];if(i[0]==e){if(i[1]==t)return!1;if(i[1]==t+1)return!1;if(i[1]==t-1)return!1}}return!0}(e,t,n.game)&&(Ve(e,t,"wall_bot"),Ve(e,t+1,"wall_bot"),Ve(e+1,t,"wall_top"),Ve(e+1,t+1,"wall_top")),"vW"===o&&function(e,t,n){if(8==e||8==t)return!1;for(const o in n.horizontal_walls){const i=n.horizontal_walls[o];if(i[0]==e&&i[1]==t)return!1}for(const o in n.vertical_walls){const i=n.vertical_walls[o];if(i[1]==t){if(i[0]==e)return!1;if(i[0]==e+1)return!1;if(i[0]==e-1)return!1}}return!0}(e,t,n.game)&&(Ve(e,t,"wall_right"),Ve(e+1,t,"wall_right"),Ve(e,t+1,"wall_left"),Ve(e+1,t+1,"wall_left"))}(e.row,e.column,e.session)}),t.$$click=()=>function(e,t,n,o){const i=j(),r=localStorage.getItem(we);if(!i||n.current!=i||!r)return;const c="/move/<owner>".replace("<owner>",r);fetch(c,{method:"post",body:JSON.stringify(o(e,t,i))}).then(e=>e.json()).then(console.log).catch(alert)}(e.row,e.column,e.session,Be[Ge()]),Object(i.g)(n=>{const i=function(e,t,n){const o=[Ne(e,t,n.game)];return"move"==Ge()&&o.push(function(e,t,n){const o=n.up_player==n.current?n.game.up_player:n.game.down_player;return o[0]==e&&o[1]==t?"player_move_blocked":o&&function(e,t,n){return e==n[0]&&(t==n[1]-1||t==n[1]+1)||t==n[1]&&(e==n[0]-1||e==n[0]+1)}(e,t,o)?function(e,t,n,o){if(e==n[0]){const i=t>n[1]?n[1]:t;for(let t in o.vertical_walls){const n=o.vertical_walls[t];if(i==n[1]&&(e==n[0]||e-1==n[0]))return!0}}if(t==n[1]){const i=e>n[0]?n[0]:e;for(let e in o.horizontal_walls){const n=o.horizontal_walls[e];if(i==n[0]&&(t==n[1]||t-1==n[1]))return!0}}return!1}(e,t,o,n.game)?"player_move_blocked":"player_move":""}(e,t,n)),"tile"+o.join(" ")+Ce(e,t,n.game)}(e.row,e.column,e.session),r="".concat(e.row).concat(e.column);return i!==n._v$&&Object(o.a)(t,n._v$=i),r!==n._v$2&&Object(o.f)(t,"id",n._v$2=r),n},{_v$:void 0,_v$2:void 0}),t})()}function He(e){return(()=>{const t=ze.cloneNode(!0);return Object(o.c)(t,Object(i.d)(i.a,{each:Te,children:t=>Object(i.d)(De,{column:t,get row(){return e.row},get session(){return e.game}})})),t})()}function Fe(e){function t(t){return e.session.current==t?"color:red":""}return(()=>{const n=We.cloneNode(!0),r=n.firstChild.firstChild,c=r.firstChild,s=c.nextSibling,l=(s.nextSibling,r.nextSibling),a=l.nextSibling,d=a.firstChild,u=d.nextSibling,b=(u.nextSibling,a.nextSibling.firstChild),h=b.nextSibling,v=h.nextSibling;return Object(o.c)(r,()=>e.session.up_player,c),Object(o.c)(r,()=>e.session.game.up_player_free_walls,s),Object(o.c)(l,Object(i.d)(i.a,{each:Te,children:t=>Object(i.d)(He,{row:t,get game(){return e.session}})})),Object(o.c)(a,()=>e.session.down_player,d),Object(o.c)(a,()=>e.session.game.down_player_free_walls,u),b.$$click=()=>Me("move"),h.$$click=()=>Me("hW"),v.$$click=()=>Me("vW"),Object(i.g)(i=>{const c=ue()?"display:none;":"",s=t(e.session.up_player),d=e.session.current==f()?"border: solid 10px red;":"border: solid 10px white;",u=t(e.session.down_player),g="move"===Ge()?"color:red;":"",p="hW"===Ge()?"color:red;":"",m="vW"===Ge()?"color:red;":"";return i._v$3=Object(o.g)(n,c,i._v$3),i._v$4=Object(o.g)(r,s,i._v$4),i._v$5=Object(o.g)(l,d,i._v$5),i._v$6=Object(o.g)(a,u,i._v$6),i._v$7=Object(o.g)(b,g,i._v$7),i._v$8=Object(o.g)(h,p,i._v$8),i._v$9=Object(o.g)(v,m,i._v$9),i},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),n})()}Object(o.b)(["click"]);const Ze=Object(o.h)("<div></div>",2),qe=Object(o.h)('<div class="row"></div>',2),Ke=Object(o.h)('<div class="full_screen_centered"><div class="quoridor"><h1> (<!>)</h1><div></div><h1> (<!>)</h1></div></div>',12),Xe=[0,1,2,3,4,5,6,7,8];function Ye(e){return(()=>{const t=Ze.cloneNode(!0);return Object(i.g)(n=>{const i=(c=e.row,s=e.column,l=e.session,"tile"+[Ne(c,s,l.game)].join(" ")+Ce(c,s,l.game)),r="".concat(e.row).concat(e.column);var c,s,l;return i!==n._v$&&Object(o.a)(t,n._v$=i),r!==n._v$2&&Object(o.f)(t,"id",n._v$2=r),n},{_v$:void 0,_v$2:void 0}),t})()}function et(e){return(()=>{const t=qe.cloneNode(!0);return Object(o.c)(t,Object(i.d)(i.a,{each:Xe,children:t=>Object(i.d)(Ye,{column:t,get row(){return e.row},get session(){return e.game}})})),t})()}function tt(e){return(()=>{const t=Ke.cloneNode(!0),n=t.firstChild.firstChild,r=n.firstChild,c=r.nextSibling,s=(c.nextSibling,n.nextSibling),l=s.nextSibling,a=l.firstChild,d=a.nextSibling;d.nextSibling;return Object(o.c)(n,()=>e.session.up_player,r),Object(o.c)(n,()=>e.session.game.up_player_free_walls,c),Object(o.c)(s,Object(i.d)(i.a,{each:Xe,children:t=>Object(i.d)(et,{row:t,get game(){return e.session}})})),Object(o.c)(l,()=>e.session.down_player,a),Object(o.c)(l,()=>e.session.game.down_player_free_walls,d),t})()}const nt=Object(o.h)('<div class="full_screen_centered"><div class="form_container"></div></div>',4),ot=Object(o.h)('<div class="covering-panel"><div class="spin"></div></div>',4),it=Object(o.h)("<h1>Looking for opponent ...</h1>",2),rt=Object(o.h)("<hr>",1),ct=Object(o.h)("<h3>Press Esc to cancel</h3>",2),st=Object(o.h)('<div class="full_screen_centered"></div>',2),lt=Object(o.h)('<div class="std_btn"> Go to Lobbies </div>',2);function at(){const[e,t]=Object(i.i)(!0);return[Object(i.d)(Q,{left:{text:"Sign In",click:()=>{t(!0)}},right:{text:"Create New Account",click:()=>{t(!1)}}}),(()=>{const t=nt.cloneNode(!0),n=t.firstChild;return Object(o.c)(n,(()=>{const t=Object(o.d)(()=>!!e(),!0);return()=>t()?Object(i.d)(K,{}):Object(i.d)(Y,{})})(),null),Object(o.c)(n,Object(i.d)(X,{}),null),t})(),Object(i.d)(W,{})]}const[dt,ut]=Object(i.i)(null),[bt,ht]=Object(i.i)(!1);function vt(){function e(){function e(e){"Escape"===e.key&&function(){const e={owner:j(),game:"Unknown"};fetch("/create_lobby",{method:"post",body:JSON.stringify(e)}).then(e=>{localStorage.removeItem("activeLobby"),ht(!1)}).catch(e=>{localStorage.removeItem("activeLobby"),ht(!1),console.log(e)})}()}return Object(i.m)(()=>{document.addEventListener("keydown",e)}),Object(i.l)(()=>{document.removeEventListener("keydown",e)}),[ot.cloneNode(!0),Object(i.d)(Q,{}),it.cloneNode(!0),rt.cloneNode(!0),ct.cloneNode(!0)]}return Object(i.d)(i.c,{get children(){return[Object(i.d)(i.b,{get when(){return bt()},get children(){return Object(i.d)(e,{})}}),Object(i.d)(i.b,{get when(){return!bt()},get children(){return[Object(i.d)(Q,{left:{text:"Game VS CPU",click:()=>{var e,t;e=ut,t=D,fetch("/join/<owner>".replace("<owner>","|QCPU|")).then(e=>e.json()).then(t=>{t&&ke(t,e)}).catch(console.log).finally(()=>{t&&t()}),V()}},get right(){return{text:"Create Lobby",click:()=>{!function(e){const t={owner:j(),game:"Quoridor"};fetch("/create_lobby",{method:"post",body:JSON.stringify(t)}).then(e=>e.json()).then(t=>{t?(localStorage.setItem("activeLobby",t),ht(!0),Ee(t,e)):alert("Only registered users, can create lobbies!")}).catch(console.log)}(ut),V()},disabled:"guest"==h()}}}),(()=>{const e=st.cloneNode(!0);return Object(o.c)(e,Object(i.d)(Je,{gameSetter:ut})),e})(),Object(i.d)(W,{})]}})]}})}function ft(e){if(e.session)return Object(i.m)(()=>{var e;e=ut,Se(),sessionStorage.setItem("stateBackupTimeout",window.setInterval(()=>{$e(e)},15e3).toString())}),Object(i.l)(()=>{Se()}),e.session.ActiveQuoridor?Object(i.d)(Fe,{get session(){return e.session.ActiveQuoridor}}):[]}function gt(){return[Object(i.d)(Q,{right:{text:"Concede",style:"color:red;",click:()=>{!function(){const e=j(),t=localStorage.getItem(we);if(!e||!t)return;const n="/move/<owner>".replace("<owner>",t);fetch(n,{method:"post",body:JSON.stringify({Concede:e})})}()}},get left(){return Object(o.d)(()=>{var e,t;return"|QCPU|"==(null===(e=dt())||void 0===e||null===(t=e.ActiveQuoridor)||void 0===t?void 0:t.down_player)},!0)()?void 0:{text:ue()?"Back to Game":"Open Chat ".concat(se()?se():""),style:se()?"color: red;":"",click:()=>{be(!ue()),ue()&&le(0)}}}}),Object(i.d)(ft,{get session(){return dt()}}),(()=>{const e=st.cloneNode(!0);return Object(o.c)(e,(()=>{const e=Object(o.d)(()=>{var e,t;return"|QCPU|"==(null===(e=dt())||void 0===e||null===(t=e.ActiveQuoridor)||void 0===t?void 0:t.down_player)},!0);return()=>e()?[]:Object(i.d)(ge,{})})()),e})()]}const[pt,mt]=Object(i.i)(null);function jt(e){if(e.session)return e.session.ActiveQuoridor?Object(i.d)(tt,{get session(){return e.session.ActiveQuoridor}}):[]}function Ot(){const e=()=>{mt(null)};function t(t){"Escape"===t.key&&e()}return Object(i.m)(()=>{document.addEventListener("keydown",t)}),Object(i.l)(()=>{document.removeEventListener("keydown",t)}),[Object(i.d)(Q,{right:{text:"Back to Lobbies",click:e}}),Object(i.d)(jt,{get session(){return pt()}}),(()=>{const t=lt.cloneNode(!0);return t.$$click=e,t})()]}Object(o.b)(["click"]);const yt=Object(o.h)('<div class="tetrominos"><div class="tetromino box1"></div><div class="tetromino box2"></div><div class="tetromino box3"></div><div class="tetromino box4"></div></div>',10);function _t(){return yt.cloneNode(!0)}const[wt,kt]=Object(i.i)(!1);const St=navigator.userAgent.toLowerCase().match(/mobile/i);var xt=function(){return O(),function(e){const t=localStorage.getItem(we);if(t)je(),$e(e),new te("/game_events/<owner>".replace("<owner>",t),(t,n)=>{xe(t,n,e)})}(ut),function(e){const t=localStorage.getItem("activeLobby");t&&(ht(!0),Ee(t,e))}(ut),St&&l("Quoridor is not yet optimized to be used on mobile device. Use at your own risk!"),[Object(i.d)(i.c,{get children(){return[Object(i.d)(i.b,{get when(){return pt()},get children(){return Object(i.d)(Ot,{})}}),Object(i.d)(i.b,{get when(){return!(!B()&&!M())},get children(){return Object(i.d)(H,{})}}),Object(i.d)(i.b,{get when(){return!f()},get children(){return[Object(i.d)(_t,{}),Object(i.d)(at,{})]}}),Object(i.d)(i.b,{get when(){return Object(o.d)(()=>!!f(),!0)()&&!dt()},get children(){return Object(i.d)(vt,{})}}),Object(i.d)(i.b,{get when(){return Object(o.d)(()=>!!f(),!0)()&&dt()},get children(){return Object(i.d)(gt,{})}})]}}),Object(o.d)((()=>{const e=Object(o.d)(()=>!!k(),!0);return()=>e()?Object(i.d)(P,{}):[]})()),Object(o.d)((()=>{const e=Object(o.d)(()=>!!s(),!0);return()=>e()?Object(i.d)(b,{}):[]})())]};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.e)(xt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[3,1,2]]]);