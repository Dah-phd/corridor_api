(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),s=(n(2),n(1));const r=Object(o.g)('<div class="systen_msg"><hr><h3></h3><button class="std_btn">Ok</button><hr>'),c=Object(o.g)('<div class="covering-panel">'),[i,l]=Object(s.j)(),[a,u]=Object(s.j)();function d(){l();const e=a();e&&e(),u()}function b(){return[(()=>{const e=r(),t=e.firstChild.nextSibling,n=t.nextSibling;return Object(o.c)(t,i),n.$$click=d,e})(),c()]}Object(o.b)(["click"]);const v="auth_token";function h(e,t,n){let o=new URL(e,window.location.href);o.protocol=o.protocol.replace("http","ws");let s=new WebSocket(o);return s.onopen=()=>console.log("socket open on ".concat(o)),s.onmessage=e=>{t(e.data)},s.onclose=e=>{n&&n(e),t(null)},s}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;const o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),document.cookie=t+"="+e+";expires="+o.toUTCString()+";path=/"}function f(e,t,n){if(e.activeMatch){t(h("/quoridor/events/"+e.activeMatch,e=>{try{const t=JSON.parse(e);n(t)}catch(t){alert("Failed to read message from server! Try reloading the page.")}}))}else l("Unable to create match, please try again later!")}function p(e,t,n,o){fetch("/quoridor/que/join/"+e).then(e=>{e.ok?e.json().then(e=>f(e,t,n)):alert("Unable to join game!")}).catch(alert).finally(()=>{o&&o()})}const j=Object(o.g)('<div class="rocket-container"><div class="structure"><svg height="352" id="rocket-svg" version="1.1" viewbox="0 0 59.266662 93.133333" width="224" xmlns="http://www.w3.org/2000/svg"><g id="layer2" transform="translate(-33.866666,-33.866666)"><path d="m 296,336 a 8.0000078,8.0000078 0 0 0 -8,8 v 80 a 8.0000078,7.9999501 0 0 0 1.16406,4.14062 l -0.22461,0.11329 49.32227,49.32031 0.0781,0.0801 0.004,-0.004 A 7.9999934,8.0000655 0 0 0 344,480 a 7.9999934,8.0000655 0 0 0 8,-8 v -80 a 7.9999934,7.9998924 0 0 0 -2.34961,-5.65625 l 0.004,-0.004 -48.00391,-48.00195 -0.004,0.002 A 8.0000078,8.0000078 0 0 0 296,336 Z" id="right-wing" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="m 184,336 a 8.0000006,8.0000078 0 0 0 -5.65234,2.3457 l -0.004,-0.002 -47.91797,47.91797 -0.082,0.082 0.004,0.002 A 8.0000078,7.9998924 0 0 0 128,392 v 80 a 8.0000078,8.0000655 0 0 0 8,8 8.0000078,8.0000655 0 0 0 5.65625,-2.34961 l 0.004,0.004 49.40039,-49.40039 -0.22657,-0.11329 A 8.0000006,7.9999501 0 0 0 192,424 v -80 a 8.0000006,8.0000078 0 0 0 -8,-8 z" id="left-wing" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="M 239.96875,128 A 111.99996,124.13082 0 0 0 176,240 l 16,200 a 8.0000006,8.0000655 0 0 0 8,8 h 80 a 8.0000078,8.0000655 0 0 0 8,-8 L 304,240 A 111.99996,124.13082 0 0 0 239.96875,128 Z" id="rocket-main-part" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="m 239.96875,128 a 111.99996,124.13082 0 0 0 -47.77344,48 h 95.51953 a 111.99996,124.13082 0 0 0 -47.74609,-48 z" id="nose" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><ellipse cx="63.5" cy="59.266663" id="window-stroke" rx="7.4083333" ry="7.4083328" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></ellipse><ellipse cx="63.499996" cy="59.266666" id="window-inner" rx="6.3499975" ry="6.3500061" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></ellipse><path d="m 240,336 a 7.9999898,8.0000078 0 0 0 -8,8 v 128 a 7.9999898,8.0000078 0 0 0 8,8 7.9999898,8.0000078 0 0 0 8,-8 V 344 a 7.9999898,8.0000078 0 0 0 -8,-8 z" id="middle-wing" style="opacity:1;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></path><path d="M 239.96875,128 A 111.99996,124.13082 0 0 0 176,240 l 7.68164,96.01562 a 8.0000006,8.0000078 0 0 0 -5.33398,2.33008 l -0.004,-0.002 -47.91797,47.91797 -0.082,0.082 0.004,0.002 A 8.0000078,7.9998924 0 0 0 128,392 v 80 a 8.0000078,8.0000655 0 0 0 8,8 8.0000078,8.0000655 0 0 0 5.65625,-2.34961 l 0.004,0.004 49.40039,-49.40039 -0.22657,-0.11329 a 8.0000006,7.9999501 0 0 0 0.18946,-0.3496 l 0.0371,0.46289 L 192,440 a 8.0000006,8.0000655 0 0 0 8,8 h 32 v 24 a 7.9999898,8.0000078 0 0 0 8,8 V 336 252 196 128.01758 A 111.99996,124.13082 0 0 0 239.96875,128 Z" id="shadow-layer" style="opacity:0.2;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(0.26458333)"></div><div class="text-container"><h2>Loading</div><div class="smoke"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span>'),[O,m]=Object(s.j)(!1),[y,_]=Object(s.j)(!1);function w(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_(e),m(!0),setTimeout(()=>{m(!1)},300)}function k(){_(!1)}function x(){return j()}function S(e,t,n){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=e+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let e=n[o];for(;" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(t))return e.substring(t.length,e.length)}}()?e(null):fetch("/auth/context/").then(o=>$(o,e,t,n)).catch(console.log)}function $(e,t,n,o){if(!e.ok){if(e.status>=500)return void l("Server error please try agian in few minutes!");if(404==e.status)return void l("User not found! Check your login!");if(403==e.status)return void l("Incorrect credentials!")}e.json().then(e=>function(e,t,n,o){if(console.log(e),"AlreadyTaken"===e)return void l("This username is already in use!");if("UnsupportedDataType"in e)return void l(e.UnsupportedDataType);t(e),g(e.authToken),e.activeMatch&&(w(),g(e.authToken),p(e.activeMatch,e,n,o))}(e,t,n,o))}const C=Object(o.g)('<div class="systen_msg"><p style="color:gray;">Username: <i style="color:red;"></i></p><hr><input type="email" placeholder="TODO!"><p><button class="std_btn">Update Email</button></p><hr><input type="password" placeholder="Password"><input type="password" placeholder="Repeat password"><p><button class="std_btn">Update Password</button></p><hr><p style="font-size:small;color:gray;"><i>Press Esc to exit.'),E=Object(o.g)('<div class="covering-panel">'),[W,L]=Object(s.j)(!1),[T,U]=Object(s.j)(!1),z=()=>{U(!1)};function P(e,t){U(!0);e.value==t.value?(e.value,alert("Password update not implemented")):(l("Passwords are not indentical!"),z()),[e,t].forEach(e=>e.value="")}function N(e){if("GUEST"==e.user.email)return void l("User profile does not exist!\nPlease login and try again!");function t(e){"Escape"===e.key&&L(!1)}let n,r,c;return Object(s.o)(()=>{document.addEventListener("keydown",t)}),Object(s.n)(()=>{document.removeEventListener("keydown",t)}),[(()=>{const t=C(),l=t.firstChild,a=l.firstChild.nextSibling,u=l.nextSibling.nextSibling,d=u.nextSibling,b=d.firstChild,v=d.nextSibling.nextSibling,h=v.nextSibling,g=h.nextSibling.firstChild;Object(o.c)(a,()=>e.user.username);const f=c;"function"===typeof f?Object(o.h)(f,u):c=u,b.$$click=()=>{alert("TODO!")};const p=n;"function"===typeof p?Object(o.h)(p,v):n=v;const j=r;return"function"===typeof j?Object(o.h)(j,h):r=h,g.$$click=()=>{P(n,r)},Object(s.h)(e=>{const n=i()?"z-index: 0 !important;":"",s=T(),r=T();return e._v$=Object(o.f)(t,n,e._v$),s!==e._v$2&&(b.disabled=e._v$2=s),r!==e._v$3&&(g.disabled=e._v$3=r),e},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})(),E()]}Object(o.b)(["click"]);const A=Object(o.g)("<button>"),I=Object(o.g)('<nav><div class="nav_block"><div class="box"></div><div class="box"></div></div><div class="image_nav"></div><div class="nav_block"><div class="box"></div><div class="box">');function q(e){return(()=>{const t=A();return t.$$click=()=>e.click(),Object(o.c)(t,()=>e.text),Object(s.h)(n=>{const s=e.style,r=e.class?e.class:"std_btn",c=e.disabled;return n._v$=Object(o.f)(t,s,n._v$),r!==n._v$2&&Object(o.a)(t,n._v$2=r),c!==n._v$3&&(t.disabled=n._v$3=c),n},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}function B(e){const t=e.context[0]();return(()=>{const n=I(),r=n.firstChild,c=r.firstChild,i=c.nextSibling,l=r.nextSibling.nextSibling.firstChild,a=l.nextSibling;return Object(o.c)(c,t?Object(s.e)(q,{get text(){return t.username},click:()=>L(!0)}):[]),Object(o.c)(i,(()=>{const t=Object(s.g)(()=>!e.left);return()=>t()?[]:Object(s.e)(q,Object(s.m)(()=>e.left))})()),Object(o.c)(l,t?Object(s.e)(q,{text:"Logout",click:()=>{return t=e.context[1],void fetch("/auth/logout").then(e=>t(null)).catch(console.log);var t}}):[]),Object(o.c)(a,(()=>{const t=Object(s.g)(()=>!e.right);return()=>t()?[]:Object(s.e)(q,Object(s.m)(()=>e.right))})()),n})()}Object(o.b)(["click"]);const D=Object(o.g)('<footer>Powered by Rust <a href="https://rocket.rs/" target="_blank" style="text-decoration:none;">\u{1f680}</a> | Frontend <a style="text-decoration:none;" href="https://www.solidjs.com/" target="_blank"><i>Solid-JS</i></a> | Developed by <a class="github" href="https://github.com/Dah-phd" target="_blank">Daniel Nikolaev');function J(){return D()}const M=Object(o.g)('<div style="flex-basis:50%;"><h1>Sign In:</h1><div><input type="text" placeholder="Email"><input type="password" placeholder="Password"><button class="std_btn">Login'),R=Object(o.g)('<div style="flex-basis:50%;"><h1>Sign In as Guest</h1><div><input type="text" placeholder="Username"><button class="std_btn">Register as Guest:'),G=Object(o.g)('<div style="flex-basis:50%;"><h1>Create New Account:</h1><div><input type="text" placeholder="Username"><input type="password" placeholder="Password"><input type="password" placeholder="Repeat password"><input type="email" placeholder="Email"><button class="std_btn">Register User');function V(e){let t,n;function s(){w(!0),function(e,t,n,o,s,r){fetch("/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(e=>$(e,n,o,s)).catch(console.log).finally(()=>{r&&r()})}(t.value,n.value,e.contextSetter,e.setWS,e.setSession,k),n.value=null}return(()=>{const e=M(),r=e.firstChild.nextSibling.firstChild,c=r.nextSibling,i=c.nextSibling;e.addEventListener("keypress",e=>{"Enter"==e.key&&s()});const l=t;"function"===typeof l?Object(o.h)(l,r):t=r;const a=n;return"function"===typeof a?Object(o.h)(a,c):n=c,i.$$click=s,e})()}function Q(e){let t;function n(){w(!0),function(e,t,n,o,s){fetch("/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(e=>$(e,t,n,o)).catch(console.log).finally(()=>{s&&s()})}(t.value,e.contextSetter,e.setWS,e.setSession,k),t.value=null}return(()=>{const e=R(),s=e.firstChild.nextSibling.firstChild,r=s.nextSibling;e.addEventListener("keypress",e=>{"Enter"==e.key&&n()});const c=t;return"function"===typeof c?Object(o.h)(c,s):t=s,r.$$click=n,e})()}function F(e){let t,n,s,r;function c(){if(n.value!=s.value)return alert("Passwords do not match!");w(!0),function(e,t,n,o,s,r,c){t.length>72?l("Password too long!"):fetch("/auth/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,email:n})}).then(e=>$(e,o,s,r)).catch(console.log).finally(()=>{c&&c()})}(t.value,n.value,r.value,e.contextSetter,e.setWS,e.setSession,k),[t,n,s,r].forEach(e=>e.value=null)}return(()=>{const e=G(),i=e.firstChild.nextSibling.firstChild,l=i.nextSibling,a=l.nextSibling,u=a.nextSibling,d=u.nextSibling;e.addEventListener("keypress",e=>{"Enter"==e.key&&c()});const b=t;"function"===typeof b?Object(o.h)(b,i):t=i;const v=n;"function"===typeof v?Object(o.h)(v,l):n=l;const h=s;"function"===typeof h?Object(o.h)(h,a):s=a;const g=r;return"function"===typeof g?Object(o.h)(g,u):r=u,d.$$click=c,e})()}Object(o.b)(["click"]);const H=Object(o.g)('<div class="lobbies">'),Z=Object(o.g)('<div class="lobby_struct">');function K(){const e=sessionStorage.getItem("lobbyInterval");window.clearInterval(Number(e))}function X(e){const[t,n]=Object(s.j)([]);return sessionStorage.setItem("lobbyInterval",window.setInterval(()=>{},1e4).toString()),Object(s.n)(K),(()=>{const n=H();return Object(o.c)(n,Object(s.e)(s.b,{get each(){return t()},children:t=>(()=>{const n=Z();return n.$$click=()=>{w(),p(t,e.setWS,e.setSession,k)},Object(o.c)(n,t),n})()})),n})()}function Y(e,t,n){const o=[];for(let s in n.horizontal_walls){let r=n.horizontal_walls[s];r[1]!=t&&r[1]!=t-1||(r[0]==e&&o.push(" bottom_red"),r[0]==e-1&&o.push(" top_red"))}for(let s in n.vertical_walls){let r=n.vertical_walls[s];r[0]!=e&&r[0]!=e-1||(r[1]==t&&o.push(" right_red"),r[1]==t-1&&o.push(" left_red"))}return o.join(" ")}function ee(e,t,n){let o=" ";return n.up_player[0]==e&&n.up_player[1]==t&&(o+="\u{1f980}"),n.down_player[0]==e&&n.down_player[1]==t&&(o+="\u{1f40d}"),o}Object(o.b)(["click"]);const te=Object(o.g)('<div class="chat_wrapper"><div class="chat_box">'),ne=Object(o.g)('<div class="msg">'),oe=Object(o.g)('<div class="msg_user"><span class="msg_user"> <span style="font-size:small;">From: '),se=Object(o.g)('<div class="send_msg"><input type="text" class="send_msg_box"><div class="send_msg_btn">'),[re,ce]=Object(s.j)(0),[ie,le]=Object(s.j)(null),[ae,ue]=Object(s.j)(!1);const[de,be]=Object(s.j)();function ve(){let e;return Object(s.f)(()=>{var t;(t=e)&&(t.scrollTop=t.scrollHeight),ie()}),(()=>{const t=te(),n=t.firstChild,r=e;return"function"===typeof r?Object(o.h)(r,n):e=n,Object(o.c)(n,Object(s.e)(s.b,{get each(){ie()},children:e=>{const t=Object(s.e)(he,{get msg_sender(){return e.player},get msg(){return e.msg}});return be(e.player),t}})),Object(o.c)(t,Object(s.e)(ge,{}),null),Object(s.h)(e=>Object(o.f)(t,ae()?"":"display:none;",e)),t})()}function he(e){return de()==e.msg_sender?(()=>{const t=ne();return Object(o.c)(t,()=>e.msg),t})():[(()=>{const t=oe(),n=t.firstChild;n.firstChild.nextSibling;return Object(o.c)(n,()=>e.msg_sender,null),t})(),(()=>{const t=ne();return Object(o.c)(t,()=>e.msg),t})()]}function ge(){let e;const t=()=>{e.value&&e.value,e.value=null};return(()=>{const n=se(),s=n.firstChild,r=s.nextSibling;n.addEventListener("keypress",e=>{"Enter"==e.key&&t()});const c=e;return"function"===typeof c?Object(o.h)(c,s):e=s,r.$$click=t,n})()}Object(o.b)(["click"]);const fe=Object(o.g)("<div>"),pe=Object(o.g)('<div class="row">'),je=Object(o.g)('<div class="full_screen_centered"><div class="quoridor"><h1> (<!>)</h1><div></div><h1> (<!>)</h1><div class="box"><button class="std_btn">PlayerMove</button><button class="std_btn">Horizontal Border</button><button class="std_btn">Vertical Border'),Oe=[0,1,2,3,4,5,6,7,8],me={move:function(e,t){return console.log(e,t,"m"),{QuoridorMove:{row:e,col:t}}},hW:function(e,t){return console.log(e,t,"h"),{QuoridorWallH:{row:e,col:t}}},vW:function(e,t){return console.log(e,t,"v"),{QuoridorWallV:{row:e,col:t}}}},[ye,_e]=Object(s.j)("move"),we=new RegExp("wall_bot|wall_top|wall_left|wall_right");function ke(e,t,n){const o=document.getElementById("".concat(e).concat(t));o&&(o.className="".concat(o.className," ").concat(n))}function xe(e){return(()=>{const t=fe();return t.addEventListener("mouseleave",()=>{"move"!==ye()&&function(e,t){if("move"===ye())return;const n=[[e,t],[e,t+1],[e+1,t],[e+1,t+1]];for(const o in n){const e=document.getElementById("".concat(n[o][0]).concat(n[o][1]));e&&(e.className=e.className.replace(we,""))}}(e.row,e.column)}),t.addEventListener("mouseenter",()=>{"move"!==ye()&&function(e,t,n){const o=ye();"hW"===o&&function(e,t,n){if(8==e||8==t)return!1;for(const o in n.vertical_walls){const s=n.vertical_walls[o];if(s[0]==e&&s[1]==t)return!1}for(const o in n.horizontal_walls){const s=n.horizontal_walls[o];if(s[0]==e){if(s[1]==t)return!1;if(s[1]==t+1)return!1;if(s[1]==t-1)return!1}}return!0}(e,t,n.game)&&(ke(e,t,"wall_bot"),ke(e,t+1,"wall_bot"),ke(e+1,t,"wall_top"),ke(e+1,t+1,"wall_top")),"vW"===o&&function(e,t,n){if(8==e||8==t)return!1;for(const o in n.horizontal_walls){const s=n.horizontal_walls[o];if(s[0]==e&&s[1]==t)return!1}for(const o in n.vertical_walls){const s=n.vertical_walls[o];if(s[1]==t){if(s[0]==e)return!1;if(s[0]==e+1)return!1;if(s[0]==e-1)return!1}}return!0}(e,t,n.game)&&(ke(e,t,"wall_right"),ke(e+1,t,"wall_right"),ke(e,t+1,"wall_left"),ke(e+1,t+1,"wall_left"))}(e.row,e.column,e.session)}),t.$$click=()=>{return t=e.row,n=e.column,o=e.session,s=e.ws,r=e.user,c=me[ye()],void(s.readyState===WebSocket.OPEN&&r&&o.current==r.email&&s.send(JSON.stringify(c(t,n))));var t,n,o,s,r,c},Object(s.h)(n=>{const s=function(e,t,n){const o=[Y(e,t,n.game)];return"move"==ye()&&o.push(function(e,t,n){const o=n.up_player==n.current?n.game.up_player:n.game.down_player;return o[0]==e&&o[1]==t?"player_move_blocked":o&&function(e,t,n){return e==n[0]&&(t==n[1]-1||t==n[1]+1)||t==n[1]&&(e==n[0]-1||e==n[0]+1)}(e,t,o)?function(e,t,n,o){if(e==n[0]){const s=t>n[1]?n[1]:t;for(let t in o.vertical_walls){const n=o.vertical_walls[t];if(s==n[1]&&(e==n[0]||e-1==n[0]))return!0}}if(t==n[1]){const s=e>n[0]?n[0]:e;for(let e in o.horizontal_walls){const n=o.horizontal_walls[e];if(s==n[0]&&(t==n[1]||t-1==n[1]))return!0}}return!1}(e,t,o,n.game)?"player_move_blocked":"player_move":""}(e,t,n)),"tile"+o.join(" ")+ee(e,t,n.game)}(e.row,e.column,e.session),r="".concat(e.row).concat(e.column);return s!==n._v$&&Object(o.a)(t,n._v$=s),r!==n._v$2&&Object(o.e)(t,"id",n._v$2=r),n},{_v$:void 0,_v$2:void 0}),t})()}function Se(e){return(()=>{const t=pe();return Object(o.c)(t,Object(s.e)(s.b,{each:Oe,children:t=>Object(s.e)(xe,Object(s.m)({column:t},e))})),t})()}function $e(e){if(e.session)return console.log(e.session),(()=>{const n=je(),r=n.firstChild.firstChild,c=r.firstChild,i=c.nextSibling,l=(i.nextSibling,r.nextSibling),a=l.nextSibling,u=a.firstChild,d=u.nextSibling,b=(d.nextSibling,a.nextSibling.firstChild),v=b.nextSibling,h=v.nextSibling;return Object(o.c)(r,()=>e.session.up_player,c),Object(o.c)(r,()=>e.session.game.up_player_free_walls,i),Object(o.c)(l,Object(s.e)(s.b,{each:Oe,children:t=>Object(s.e)(Se,{row:t,get session(){return e.session},get ws(){return e.ws},get user(){return e.user}})})),Object(o.c)(a,()=>e.session.down_player,u),Object(o.c)(a,()=>e.session.game.down_player_free_walls,d),b.$$click=()=>_e("move"),v.$$click=()=>_e("hW"),h.$$click=()=>_e("vW"),Object(s.h)(s=>{const c=ae()?"display:none;":"",i=t(e.session.up_player),u=e.session.current==e.user.email?"border: solid 10px red;":"border: solid 10px white;",d=t(e.session.down_player),g="move"===ye()?"color:red;":"",f="hW"===ye()?"color:red;":"",p="vW"===ye()?"color:red;":"";return s._v$3=Object(o.f)(n,c,s._v$3),s._v$4=Object(o.f)(r,i,s._v$4),s._v$5=Object(o.f)(l,u,s._v$5),s._v$6=Object(o.f)(a,d,s._v$6),s._v$7=Object(o.f)(b,g,s._v$7),s._v$8=Object(o.f)(v,f,s._v$8),s._v$9=Object(o.f)(h,p,s._v$9),s},{_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),n})();function t(t){var n;return(null===(n=e.session)||void 0===n?void 0:n.current)==t?"color:red":""}}Object(o.b)(["click"]);const Ce=Object(o.g)("<div>"),Ee=Object(o.g)('<div class="row">'),We=Object(o.g)('<div class="full_screen_centered"><div class="quoridor"><h1> (<!>)</h1><div></div><h1> (<!>)'),Le=[0,1,2,3,4,5,6,7,8];function Te(e){return(()=>{const t=Ce();return Object(s.h)(n=>{const s=(c=e.row,i=e.column,l=e.session,"tile"+[Y(c,i,l.game)].join(" ")+ee(c,i,l.game)),r="".concat(e.row).concat(e.column);var c,i,l;return s!==n._v$&&Object(o.a)(t,n._v$=s),r!==n._v$2&&Object(o.e)(t,"id",n._v$2=r),n},{_v$:void 0,_v$2:void 0}),t})()}function Ue(e){return(()=>{const t=Ee();return Object(o.c)(t,Object(s.e)(s.b,{each:Le,children:t=>Object(s.e)(Te,{column:t,get row(){return e.row},get session(){return e.game}})})),t})()}function ze(e){return(()=>{const t=We(),n=t.firstChild.firstChild,r=n.firstChild,c=r.nextSibling,i=(c.nextSibling,n.nextSibling),l=i.nextSibling,a=l.firstChild,u=a.nextSibling;u.nextSibling;return Object(o.c)(n,()=>e.session.up_player,r),Object(o.c)(n,()=>e.session.game.up_player_free_walls,c),Object(o.c)(i,Object(s.e)(s.b,{each:Le,children:t=>Object(s.e)(Ue,{row:t,get game(){return e.session}})})),Object(o.c)(l,()=>e.session.down_player,a),Object(o.c)(l,()=>e.session.game.down_player_free_walls,u),t})()}const Pe=Object(o.g)('<div class="full_screen_centered"><div class="form_container">'),Ne=Object(o.g)('<div class="covering-panel"><div class="spin">'),Ae=Object(o.g)("<h1>Looking for opponent ..."),Ie=Object(o.g)("<hr>"),qe=Object(o.g)("<h3>Press Esc to cancel"),Be=Object(o.g)('<div class="full_screen_centered">'),De=Object(o.g)('<div class="std_btn"> Go to Lobbies ');function Je(e){const[t,n]=Object(s.j)(!0);return[Object(s.e)(B,{get context(){return e.context},left:{text:"Sign In",click:()=>{n(!0)}},right:{text:"Create New Account",click:()=>{n(!1)}}}),(()=>{const n=Pe(),r=n.firstChild;return Object(o.c)(r,(()=>{const n=Object(s.g)(()=>!!t());return()=>n()?Object(s.e)(V,{get contextSetter(){return e.context[1]},get setWS(){return e.setWS},get setSession(){return e.setSession}}):Object(s.e)(F,{get contextSetter(){return e.context[1]},get setWS(){return e.setWS},get setSession(){return e.setSession}})})(),null),Object(o.c)(r,Object(s.e)(Q,{get contextSetter(){return e.context[1]},get setWS(){return e.setWS},get setSession(){return e.setSession}}),null),n})(),Object(s.e)(J,{})]}const[Me,Re]=Object(s.j)(!1);function Ge(e){e.context[0]();function t(){function t(e){e.key}return Object(s.o)(()=>{document.addEventListener("keydown",t)}),Object(s.n)(()=>{document.removeEventListener("keydown",t)}),[Ne(),Object(s.e)(B,{get context(){return e.context}}),Ae(),Ie(),qe()]}return Object(s.e)(s.d,{get children(){return[Object(s.e)(s.c,{get when(){return Me()},get children(){return Object(s.e)(t,{})}}),Object(s.e)(s.c,{get when(){return!Me()},get children(){return[Object(s.e)(B,{get context(){return e.context},left:{text:"Game VS CPU",click:()=>{var t,n,o;t=e.setWS,n=e.setSession,o=k,fetch("/quoridor/solo").then(e=>{e.ok?e.json().then(e=>f(e,t,n)):alert("Unable to create solo game!")}).catch(e=>{alert(e)}).finally(()=>{o&&o()}),w()}},right:{text:"Create Lobby",click:()=>{var t,n,o;t=e.setWS,n=e.setSession,o=k,h("/quoridor/que/host",e=>{let s=h("/quoridor/events/"+e,n);t(s),o&&o()},()=>{o&&o()}),w()}}}),(()=>{const t=Be();return Object(o.c)(t,Object(s.e)(X,{get setWS(){return e.setWS},get setSession(){return e.setSession}})),t})(),Object(s.e)(J,{})]}})]}})}function Ve(e){var t;if(!e.ws)return;let n,r;return null!==(t=e.session)&&void 0!==t&&t.winner?(alert("Winner is ".concat(e.session.winner)),n="Back to Lobbies",r=()=>{var t;return null===(t=e.ws)||void 0===t?void 0:t.close()}):(n="Concede",r=()=>{var t;(t=e.ws).readyState===WebSocket.OPEN&&t.send("Concede")}),[Object(s.e)(B,{get context(){return e.context},right:{text:n,style:"color:red;",click:r},get left(){return{text:ae()?"Back to Game":"Open Chat ".concat(re()?re():""),style:re()?"color: red;":"",click:()=>{ue(!ae()),ae()&&ce(0)}}}}),Object(s.e)($e,{get ws(){return e.ws},get session(){return e.session},get user(){return e.context[0]()}}),(()=>{const e=Be();return Object(o.c)(e,Object(s.e)(ve,{})),e})()]}const[Qe,Fe]=Object(s.j)(null);function He(e){if(e.session)return e.session?Object(s.e)(ze,{get session(){return e.session}}):[]}function Ze(e){const t=()=>{Fe(null)};function n(e){"Escape"===e.key&&t()}return Object(s.o)(()=>{document.addEventListener("keydown",n)}),Object(s.n)(()=>{document.removeEventListener("keydown",n)}),[Object(s.e)(B,Object(s.m)(e,{right:{text:"Back to Lobbies",click:t}})),Object(s.e)(He,{get session(){return Qe()}}),(()=>{const e=De();return e.$$click=t,e})()]}Object(o.b)(["click"]);const Ke=Object(o.g)('<div class="tetrominos"><div class="tetromino box1"></div><div class="tetromino box2"></div><div class="tetromino box3"></div><div class="tetromino box4">');function Xe(){return Ke()}const[Ye,et]=Object(s.j)(!1);const tt=navigator.userAgent.toLowerCase().match(/mobile/i);var nt=function(){const[e,t]=Object(s.j)(null),[n,o]=Object(s.j)(null),[r,c]=Object(s.j)(null);return S(o,t,c),tt&&l("Quoridor is not yet optimized to be used on mobile device. Use at your own risk!"),[Object(s.e)(s.d,{get children(){return[Object(s.e)(s.c,{get when(){return Qe()},get children(){return Object(s.e)(Ze,{context:[n,o]})}}),Object(s.e)(s.c,{when:!O&&!y,get children(){return Object(s.e)(x,{})}}),Object(s.e)(s.c,{get when(){return!n()},get children(){return[Object(s.e)(Xe,{}),Object(s.e)(Je,{context:[n,o],setWS:t,setSession:c})]}}),Object(s.e)(s.c,{get when(){return!e()},get children(){return Object(s.e)(Ge,{context:[n,o],setSession:c,setWS:t})}}),Object(s.e)(s.c,{get when(){return Object(s.g)(()=>!!e())()&&r()},get children(){return Object(s.e)(Ve,{context:[n,o],get ws(){return e()},get session(){return r()}})}})]}}),Object(s.g)((()=>{const e=Object(s.g)(()=>!!W());return()=>e()?Object(s.e)(N,{get user(){return n()}}):[]})()),Object(s.g)((()=>{const e=Object(s.g)(()=>!!i());return()=>e()?Object(s.e)(b,{}):[]})())]};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.d)(nt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[3,1,2]]]);